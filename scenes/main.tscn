[gd_scene load_steps=10 format=3 uid="uid://bmain_scene_ec2"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1_main"]
[ext_resource type="PackedScene" uid="uid://lobby_ui_ec2" path="res://scenes/ui/lobby.tscn" id="2_lobby"]
[ext_resource type="PackedScene" uid="uid://sandbag_scene_ec2" path="res://scenes/sandbag.tscn" id="3_sandbag"]
[ext_resource type="PackedScene" uid="uid://breakable_block_ec2" path="res://scenes/breakable_block.tscn" id="4_block"]
[ext_resource type="PackedScene" uid="uid://ai_rock_ec2" path="res://scenes/ai_rock.tscn" id="5_ai_rock"]
[ext_resource type="Shader" path="res://shaders/space_background.gdshader" id="6_shader"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_space"]
shader = ExtResource("6_shader")
shader_parameter/time_scale = 1.0
shader_parameter/star_density = 0.5
shader_parameter/nebula_intensity = 0.6
shader_parameter/depth_intensity = 1.0
shader_parameter/enable_scroll = 1.0
shader_parameter/enable_twinkle = 1.0
shader_parameter/enable_nebula_drift = 1.0
shader_parameter/enable_parallax = 1.0
shader_parameter/nebula_color1 = Vector3(0.102, 0.039, 0.243)
shader_parameter/nebula_color2 = Vector3(0.176, 0.106, 0.412)
shader_parameter/star_color = Vector3(0.8, 0.85, 1.0)
shader_parameter/accent_color = Vector3(0.545, 0.361, 0.965)

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_wall"]
bounce = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_wall"]
size = Vector2(50, 4200)

[node name="Main" type="Node2D"]
script = ExtResource("1_main")

[node name="Background" type="ColorRect" parent="."]
z_index = -100
offset_left = -5000.0
offset_top = -5000.0
offset_right = 5000.0
offset_bottom = 5000.0
material = SubResource("ShaderMaterial_space")

[node name="Arena" type="Node2D" parent="."]

[node name="ArenaBorder" type="StaticBody2D" parent="Arena"]
collision_layer = 2
collision_mask = 1
physics_material_override = SubResource("PhysicsMaterial_wall")

[node name="TopWall" type="CollisionShape2D" parent="Arena/ArenaBorder"]
position = Vector2(0, -2000)
rotation = 1.5708
shape = SubResource("RectangleShape2D_wall")

[node name="BottomWall" type="CollisionShape2D" parent="Arena/ArenaBorder"]
position = Vector2(0, 2000)
rotation = 1.5708
shape = SubResource("RectangleShape2D_wall")

[node name="LeftWall" type="CollisionShape2D" parent="Arena/ArenaBorder"]
position = Vector2(-2000, 0)
shape = SubResource("RectangleShape2D_wall")

[node name="RightWall" type="CollisionShape2D" parent="Arena/ArenaBorder"]
position = Vector2(2000, 0)
shape = SubResource("RectangleShape2D_wall")

[node name="WallVisual" type="Polygon2D" parent="Arena"]
color = Color(0.15, 0.15, 0.25, 1)
polygon = PackedVector2Array(-2025, -2025, 2025, -2025, 2025, -1975, -2025, -1975)

[node name="WallVisual2" type="Polygon2D" parent="Arena"]
color = Color(0.15, 0.15, 0.25, 1)
polygon = PackedVector2Array(-2025, 1975, 2025, 1975, 2025, 2025, -2025, 2025)

[node name="WallVisual3" type="Polygon2D" parent="Arena"]
color = Color(0.15, 0.15, 0.25, 1)
polygon = PackedVector2Array(-2025, -2025, -1975, -2025, -1975, 2025, -2025, 2025)

[node name="WallVisual4" type="Polygon2D" parent="Arena"]
color = Color(0.15, 0.15, 0.25, 1)
polygon = PackedVector2Array(1975, -2025, 2025, -2025, 2025, 2025, 1975, 2025)

[node name="Sandbag" parent="Arena" instance=ExtResource("3_sandbag")]
position = Vector2(0, 0)

[node name="AIOpponent" parent="Arena" instance=ExtResource("5_ai_rock")]
position = Vector2(300, 0)

[node name="Blocks" type="Node2D" parent="Arena"]

[node name="Block1" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(-800, -600)

[node name="Block2" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(-800, 600)

[node name="Block3" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(800, -600)

[node name="Block4" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(800, 600)

[node name="Block5" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(-1400, 0)

[node name="Block6" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(1400, 0)

[node name="Block7" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(0, -1000)

[node name="Block8" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(0, 1000)

[node name="Block9" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(-1400, -1000)

[node name="Block10" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(1400, -1000)

[node name="Block11" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(-1400, 1000)

[node name="Block12" parent="Arena/Blocks" instance=ExtResource("4_block")]
position = Vector2(1400, 1000)

[node name="Players" type="Node2D" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="Lobby" parent="UI" instance=ExtResource("2_lobby")]

[node name="HUD" type="Control" parent="UI"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2

[node name="DamageBar" type="ProgressBar" parent="UI/HUD"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -150.0
offset_top = -50.0
offset_right = 150.0
offset_bottom = -20.0
value = 100.0
show_percentage = false

[node name="DamageLabel" type="Label" parent="UI/HUD"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -150.0
offset_top = -70.0
offset_right = 150.0
offset_bottom = -50.0
text = "HULL INTEGRITY"
horizontal_alignment = 1

[node name="PlayerCount" type="Label" parent="UI/HUD"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -150.0
offset_top = 10.0
offset_right = -10.0
offset_bottom = 40.0
text = "Players: 0"
horizontal_alignment = 2

[node name="Title" type="Label" parent="UI/HUD"]
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -200.0
offset_top = 10.0
offset_right = 200.0
offset_bottom = 40.0
text = "EC2 SPACE COMBAT"
horizontal_alignment = 1
